public with sharing class EmailController {
    
    @TestVisible
    private boolean throwException=false;
    public EmailController() {}

    public void sendEmail() {
        Contact u = [select id,email from contact where firstname like '%rahul%' limit 1];
        Messaging.SingleEmailMessage email = new Messaging.SingleEmailMessage();
        string[] to = new string[] {u.email};
        //string[] cc = new string[] {u.email};
        
        email.setToAddresses(to);        
        email.setSubject('Test Mail');
        
        email.setHtmlBody('Hello, <br/><br/>This is the test mail that you generated. <br/>The Email Id for which this mail was generated by '+to[0]+'<br/><br/>Regards<br/> Developer');
        try{
            if(Test.isRunningTest() && throwException) {
                Contact c = null;
                insert c;
            }
            Messaging.sendEmail(new Messaging.SingleEmailMessage[] { email });
        }catch(exception e){
            apexpages.addmessage(new apexpages.message(apexpages.severity.error,e.getMessage()));
        }
    }
}